{"version":3,"sources":["scraper.es6.js"],"names":[],"mappings":";;;;;;AAIA,IAAI,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC;IAC5B,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC;IAC5B,CAAC,CAAC;AACN,OAAO,CAAC,YAAY,CAAC,CAAC;;AAEtB,IAAI,SAAS,GAAG,6EAA6E,CAAC;;AAE9F,SAAS,WAAW,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,EAAC;AACjC,QAAG,GAAG,EAAC;AACH,eAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AACnB,eAAM;KACT;AACD,QAAI,IAAI,CAAC,UAAU,IAAI,GAAG,EAAE;AACxB,SAAC,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACvB,YAAI,OAAO,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,EAAE,EAAE,EAAE;AAC1C,mBAAO,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,KAAK,CAAC;SACxC,CAAC,CAAC;AACH,YAAI,OAAO,GAAG,EAAE,CAAC;AACjB,eAAO,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,EAAE,EAAE;AAC1B,mBAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC;SAC9B,CAAC,CAAC;AACH,YAAI,YAAY,GAAG,EAAE,CAAC;AACtB,eAAO,CAAC,OAAO,CAAC,UAAC,EAAE,EAAE,CAAC,EAAK;AACvB,gBAAG,EAAE,CAAC,UAAU,CAAC,YAAY,CAAC,IAAI,IAAI,EAAC;AACnC,4BAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;aACvB;SACJ,CAAC,CAAC;;AAEH,YAAI,MAAM,GAAG,WAAW,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;AAChD,eAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;KACtB;CAEJ;;AAED,SAAS,WAAW,CAAC,OAAO,EAAE,aAAa,EAAC;AACxC,QAAI,GAAG,GAAG,EAAE,CAAA;AACZ,SAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAE,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACzC,YAAI,IAAI,GAAG,OAAO,CAAC,KAAK,CAAE,aAAa,CAAC,CAAC,CAAC,GAAG,CAAC,EAAG,aAAa,CAAC,CAAC,GAAC,CAAC,CAAC,CAAC,CAAC;;AAErE,WAAG,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,UAAA,CAAC;mBAAI,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC;SAAA,CAAC,CAAA;KAE7C;AACD,WAAO,GAAG,CAAC;CACd;;AAED,OAAO,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC","file":"scraper.js","sourcesContent":["/**\n * Created by wwymak on 09/01/2016.\n */\n\nvar cheerio = require('cheerio'),\n    request = require('request'),\n    $;\nrequire('prototypes');\n\nvar scriptURL = \"http://www.ageofthering.com/atthemovies/scripts/fellowshipofthering1to4.php\";\n\nfunction parseScript(err, resp, html){\n    if(err){\n        console.log(error);\n        return\n    }\n    if (resp.statusCode == 200) {\n        $ = cheerio.load(html);\n        var tempArr = $('td').filter(function (i, el) {\n            return $(el).attr(\"valign\") == \"top\";\n        });\n        var textArr = [];\n        tempArr.each(function (i, el) {\n            textArr.push($(el).text());\n        });\n        var sceneIndices = [];\n        textArr.forEach((el, i) => {\n            if(el.startsWith(\" \\r\\nScene\") == true){\n                sceneIndices.push(i)\n            }\n        });\n\n        var parsed = splitScenes(textArr, sceneIndices);\n        console.log(parsed)\n    }\n\n}\n\nfunction splitScenes(textArr, sceneIndexArr){\n    var out = {}\n    for(var i = 0; i< sceneIndexArr.length; i++) {\n        var temp = textArr.slice((sceneIndexArr[i] + 1), sceneIndexArr[i+1]);\n\n        out[i] = temp.filter(d => d.endsWith(\":\"))\n\n    }\n    return out;\n}\n\nrequest(scriptURL, parseScript);\n"]}